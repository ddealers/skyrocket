(function(){var t,e,i,s,n,r,a,o,h,l,u,c,p,d,g,f,m,y,w,b,x,v,T,C,S,k,_,z,L,A,E,M,j,O,F,P,D,W,I,B,R,H,X,G,Y,N,U,Q,V,q,K,J,Z,te,ee,ie,se,ne,re,ae,oe,he,le,ue=[].slice,ce=function(t,e){return function(){return t.apply(e,arguments)}},pe=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},de={}.hasOwnProperty,ge=function(t,e){function i(){this.constructor=t}for(var s in e)de.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};null==window.dealersjs&&(window.dealersjs={}),null==window.d2oda&&(window.d2oda={}),null==window.lib&&(window.lib={}),null==(te=window.dealersjs).mobile&&(te.mobile=L=function(){function t(){}return t.user_agent=navigator.userAgent.toLowerCase(),t.isIOS=function(){return!0===this.isIpad()||!0===this.isIphone()||!0===this.isIpod()?!0:!1},t.isIpad=function(){return this.user_agent.indexOf("ipad")>-1},t.isIphone=function(){return this.user_agent.indexOf("iphone")>-1},t.isIpod=function(){return this.user_agent.indexOf("ipod")>-1},t.isAndroid=function(){return this.user_agent.indexOf("android")>-1},t.isMobile=function(){return this.user_agent.indexOf("mobile")>-1},t}()),null==(ee=window.d2oda).utilities&&(ee.utilities=V=function(){function t(){}return t.shuffleNoRepeat=function(t,e){var i,s,n,r,a;for(i=t.slice(0),r=Array(),s=a=1;e>=1?e>=a:a>=e;s=e>=1?++a:--a)n=Math.round(Math.random()*(i.length-1)),r.push(i[n]),i.splice(n,1);return r},t.shuffle=function(t){var e,i,s,n,r,a;for(e=t.slice(0),i=n=r=e.length-1;0>=r?0>=n:n>=0;i=0>=r?++n:--n)s=Math.floor(Math.random()*(i+1)),a=[e[s],e[i]],e[i]=a[0],e[s]=a[1];return e},t.clone=function(t){var e,i,s;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);s=new t.constructor;for(i in t)s[i]=this.clone(t[i]);return s},t.isArray=function(t){return Array.isArray(t||function(){}),"[object Array]"==={}.toString.call(t)},t}()),null==(ie=window.d2oda).behaviors&&(ie.behaviors=i=function(){function t(){}return t.initDragListener=function(){return t.addEventListener("mousedown",t.handleMouseDown)},t.endDragListener=function(){return t.removeEventListener("mousedown",t.handleMouseDown)},t}.call(this)),null==(se=window.d2oda).actions&&(se.actions=e=function(){function t(){}return t.fadeOut=function(){return TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),0===this.alpha?(this.y-=20,TweenLite.from(this,.5,{alpha:1,y:this.y+20})):(this.y+=20,TweenLite.to(this,.5,{alpha:0,y:this.y-20}))},t.fadeIn=function(){return TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),1===this.alpha?(this.y-=20,TweenLite.from(this,.5,{alpha:0,y:this.y+20})):(this.y+=20,TweenLite.to(this,.5,{alpha:1,y:this.y-20}))},t.pulse=function(t){return null==t&&(t=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,t?TweenMax.to(this,.5,{scaleX:.8,scaleY:.8,repeat:-1,yoyo:!0}):void 0},t.blink=function(t){return null==t&&(t=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,t?TweenMax.to(this,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},t.hide=function(){return this.visible=!1},t.setInOrigin=function(){return this.x=this.pos.x,this.y=this.pos.y},t.dropInPlace=function(t,e,i){return null==t&&(t=1),null==e&&(e=1),null==i&&(i=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.removeAllEventListeners()},t.putInPlace=function(t,e,i,s){return null==e&&(e=1),null==i&&(i=1),null==s&&(s=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,1,{ease:Back.easeOut,delay:.1,x:t.x,y:t.y,alpha:e,scaleX:i,scaleY:s})},t.returnToPlace=function(t,e,i){return null==t&&(t=1),null==e&&(e=1),null==i&&(i=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,.5,{ease:Back.easeOut,delay:.1,x:this.pos.x,y:this.pos.y,alpha:t,scaleX:e,scaleY:i})},t}()),null==(ne=window.d2oda).methods&&(ne.methods=z=function(){function t(){}return t.createBitmap=function(t,e,i,s,n){var r,a;return null==n&&(n="tl"),a=lib.preloader.preload.getResult(e),r=new createjs.Bitmap(a),r.x=i,r.y=s,r.width=a.width,r.height=a.height,r.name=t,this.setPosition(n,r),r},t.insertBitmap=function(t,e,i,s,n){var r;return null==n&&(n="tl"),r=this.createBitmap(t,e,i,s,n),this.add(r),r},t.createText=function(t,e,i,s,n,r,a){var o;return null==a&&(a="left"),o=new createjs.Text(e,i,s),o.name=t,o.x=n,o.y=r,o.textAlign=a,o},t.insertText=function(t,e,i,s,n,r,a){var o;return null==a&&(a="left"),o=this.createText(t,e,i,s,n,r,a),this.add(o),o},t.createSprite=function(t,e,i,s,n,r){var a,o,h,l,u,c;return null==i&&(i=null),null==r&&(r="tl"),u=function(){var t,i,s;for(s=[],t=0,i=e.length;i>t;t++)h=e[t],s.push(lib.preloader.preload.getResult(h));return s}(),c=u[0].width,o=u[0].height,l=new createjs.SpriteSheet({images:u,animations:i,frames:{width:c,height:o}}),a=new createjs.BitmapAnimation(l),a.x=s,a.y=n,a.width=c,a.height=o,a.name=t,a.currentFrame=0,this.setPosition(r,a),a},t.insertSprite=function(t,e,i,s,n,r){var a;return null==i&&(i=null),null==r&&(r="tl"),a=this.createSprite(t,e,i,s,n,r),this.add(a),a},t.setPosition=function(t,e){switch(null==e&&(e=null),e||(e=this),t){case"tc":return this.setReg(e,e.width/2,0);case"tr":return this.setReg(e,e.width,0);case"ml":return this.setReg(e,0,e.height/2);case"mc":return this.setReg(e,e.width/2,e.height/2);case"mr":return this.setReg(e,e.width,e.height/2);case"bl":return this.setReg(e,0,e.height);case"bc":return this.setReg(e,e.width/2,e.height);case"br":return this.setReg(e,e.width,e.height);default:return this.setReg(e,0,0)}},t.setReg=function(t,e,i){return t.regX=e,t.regY=i,t},t.add=function(t,e){return null==e&&(e=!0),this.addChild(t),e?lib[t.name]=t:void 0},t.delay=function(){var t,e,i;return i=arguments[0],e=arguments[1],t=3<=arguments.length?ue.call(arguments,2):[],setTimeout.apply(null,[e,i].concat(ue.call(t)))},t}()),null==(re=window.d2oda).stage&&(re.stage={w:800,h:600,r:1}),null==(ae=window.d2oda).evaluator&&(ae.evaluator=g=function(){function t(){}return t.success=null,t.evaluate=function(t,e,i){if(console.log(t,e,i),t instanceof Function)return t(e,i),void 0;switch(t){case"repeat":return this.evaluateRepeat();case"finish":return this.evaluateFinish(i);case"global_01":return this.evaluateGlobal01(e);case"global_03":return this.evaluateGlobal03(e,i);case"click_O1":return this.evaluateClick01(e,i);case"click_O1_01":return this.evaluateClick01_01(e,i);case"click_02":return this.evaluateClick02(e,i);case"click_03":return this.evaluateClick03(e,i);case"drop_01":return this.evaluateDrop01(e,i);case"drop_02":return this.evaluateDrop02(e,i);case"drop_02_01":return this.evaluateDrop02_01(e,i);case"drop_02_02":return this.evaluateDrop02_02(e,i);case"drop_03":return this.evaluateDrop03(e,i);case"drop_04":return this.evaluateDrop04(e,i);case"clon_01":return this.evaluateClon01(e,i);case"switch_01":return this.evaluateSwitch01(e,i);case"choose_01":return this.evaluateChoose01(e);case"show_choose_01":return this.evaluateShowChoose01(e,i);case"hangman_click_01":return this.evaluateHangmanClick01(e,i);case"show_click_01":return this.evaluateShowClick01(e,i);case"phrase_drop_01":return this.evaluatePhraseDrop01(e,i);case"phrase_drop_02":return this.evaluatePhraseDrop02(e,i);case"phrase_drop_03":return this.evaluatePhraseDrop03(e,i);case"sprite_drop_01":return this.evaluateSpriteDrop01(e,i);case"word_drop_01":return this.evaluateWordDrop01(e,i);case"word_complete_01":return this.evaluateWordComplete01(e,i)}},t.evaluateRepeat=function(){return createjs.Sound.stop(),createjs.Sound.play(lib.scene.snd)},t.evaluateFinish=function(t){var e,i,s,n,r,a,o,h;if(lib[t].droptargets)for(o=lib[t].droptargets,s=0,r=o.length;r>s;s++)e=o[s],e.showEvaluation(),e.complete&&lib.score.plusOne();else if(lib[t].group)for(h=lib[t].group,n=0,a=h.length;a>n;n++)i=h[n],console.log(lib[i].complete),lib[i].complete&&lib.score.plusOne();return lib.scene.success(!1)},t.evaluateGlobal01=function(t){return lib[t].index===this.success?lib.scene.success():lib.scene.fail()},t.evaluateGlobal03=function(t){return lib[t].index===d2oda.evaluator.success?(lib[t].updateState(),lib[t].parent.nextCard(),lib[t].parent.i===lib[t].parent.shuffleAnswers.length?lib.scene.success():lib.score.plusOne()):lib.scene.fail()},t.evaluateHangmanClick01=function(t,e){var i,s,n,r,a,o,h,l,u;for(n=!0,lib[t].visible=!1,l=lib[e].droptargets,r=0,o=l.length;o>r;r++)s=l[r],lib[t].index===s.success&&(s.update({complete:!0}),n=!1),console.log(lib[t].index,s.success,n);if(n)lib.scene.fail(),lib.hangman.current++,lib.hangman.current>=lib.hangman.group.length?(lib.hangman.current=0,lib.scene.nextStep()):lib.hangman.update({type:"fadeIn",target:lib.hangman.group[lib.hangman.current]});else for(i=!0,u=lib[e].droptargets,a=0,h=u.length;h>a;a++)s=u[a],s.complete||(i=!1);return i?lib.scene.success():void 0},t.evaluateShowClick01=function(t,e){return lib[e].update({type:"fadeIn",target:lib[t].index})},t.evaluateWordDrop01=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(lib[e.parent.target][e.parent.fx](),lib.scene.success(),e.parent.onComplete()):void 0)},t.evaluateWordComplete01=function(t,e){var i;return i=lib[t].oncomplete.index,lib[e].words[i].enabled=!0},t.evaluateClick01=function(t,e){var i,s,n;return i=lib[t].index,n=lib[e].droptargets,s=lib[e].currentTarget,i!==n[s].success?lib.scene.fail():(n[s].complete=!0,n[s].update(),lib[e].currentTarget++,lib[e].currentTarget===n.length?lib.scene.success():void 0)},t.evaluateClick01_01=function(t,e){var i,s,n,r;return i=lib[t].index,n=lib[e].droptargets,s=lib[e].currentTarget,i!==n[s].success?lib.scene.fail():(n[s].complete=!0,n[s].update(),lib[e].currentTarget++,lib[e].currentTarget===n.length?(r=lib[e].nextGroup,lib.score.plusOne(),createjs.Sound.play("s/good"),lib[r].setInvisible(!1)):void 0)},t.evaluateClick02=function(t,e){return lib[t].index===lib[e].success?(lib[e].complete=!0,lib[t].updateState(),lib.scene.success()):lib.scene.fail()},t.evaluateClick03=function(t,e){var i,s;return s=lib[e].targets,i=lib[e].currentTarget,lib[t].index===lib[e].success?(s[i].complete=!0,lib[e].fadeOut(s[i]),lib.scene.success(!1),createjs.Sound.play("s/good"),lib[e].currentTarget++):(lib[e].warnings++,lib.scene.fail(),3===lib[e].warnings?(lib.score.stop(),lib.game.nextScene()):void 0)},t.evaluateDrop01=function(t,e){return lib[t].afterSuccess({x:e.x,y:e.y}),lib[t].index===e.success?e.update():e.update(!1)},t.evaluateDrop02=function(t,e){return lib[t].index===e.success?(e.update(),lib[t].afterSuccess(),lib.scene.success()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop02_01=function(t,e){var i,s,n,r,a,o,h,l;for(i=!0,lib[t].index===e.success?e.update(lib[t].label.text,!0):e.update(lib[t].label.text,!1),lib[t].afterSuccess(),h=lib[t].droptargets,n=0,a=h.length;a>n;n++)s=h[n],""===s.text.text&&(i=!1);if(i){for(l=lib[t].droptargets,r=0,o=l.length;o>r;r++)s=l[r],s.showEvaluation(),s.complete&&lib.score.plusOne();return lib.scene.success(!1)}},t.evaluateDrop02_02=function(t,e){return lib[t].index===e.success?(e.update({complete:!0}),lib[t].afterSuccess(),lib.scene.success()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop03=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(lib[e.parent.target].fadeOut(),lib.scene.success()):void 0)},t.evaluatePhraseDrop01=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,lib.score.plusOne(),createjs.Sound.play("s/good"),e.parent.currentTarget===e.parent.droptargets.length?lib.scene.success(!1):void 0)},t.evaluatePhraseDrop02=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?lib.scene.success():void 0)},t.evaluatePhraseDrop03=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(e.parent.fadeOut(),lib.scene.success()):void 0)},t.evaluateSpriteDrop01=function(t,e){return lib[t].index===e.parent.success?(e.parent.nextStep(),lib[t].afterSuccess(),lib.scene.success(!0,!1)):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop04=function(t,e){return lib[t].index===e.success?(e.update({complete:!0}),lib[t].afterSuccess(),e.parent.evaluateWords()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateClon01=function(t,e){return lib[t].index===e.success?e.update(!0,lib[t].bmpid):e.update(!1,lib[t].bmpid),lib[t].afterSuccess()},t.evaluateSwitch01=function(t,e){return lib[t].index===lib[e].success?(lib[e].doSwitch(),lib.scene.success()):lib.scene.fail()},t.evaluateShowChoose01=function(t,e){var i,s,n,r,a,o,h;if(console.log(t,e),n=lib[t].index-1,d2oda.utilities.isArray(e)){for(h=[],a=0,o=e.length;o>a;a++)r=e[a],s=lib[r].group[n],h.push(i=lib[r].update({type:"fadeIn",target:s}));return h}},t.evaluateChoose01=function(t){return lib.scene.choose=lib[t].index,lib.scene.success(!1)},t}()),Array.prototype.toDictionary=function(t){var e,i,s,n;for(e={},s=0,n=this.length;n>s;s++)i=this[s],null!=i[t]&&(e[i[t]]=i);return e},Array.prototype.where=function(t){var e;return"object"!=typeof t?[]:(e=Object.keys(t).length,this.filter(function(i){var s,n,r;n=0;for(s in t)r=t[s],i[s]===r&&(n+=1);return n===e?!0:!1}))},Array.prototype.unique=function(){var t,e,i,s,n,r;for(e={},t=s=0,n=this.length;n>=0?n>s:s>n;t=n>=0?++s:--s)e[this[t]]=this[t];r=[];for(t in e)i=e[t],r.push(i);return r},Array.prototype.compare=function(t){var e;if(e=this.length,e!==t.length)return!1;for(;e--;)if(this[e]!==t[e])return!1;return!0},Array.prototype.merge=function(t){return Array.prototype.push.apply(this,t)},Array.prototype.remove=function(){var t,e,i,s,n,r;for(e=1<=arguments.length?ue.call(arguments,0):[],s=[],n=0,r=e.length;r>n;n++)t=e[n],i=this.indexOf(t),-1!==i&&s.push(this.splice(i,1));return 1===e.length&&(s=s[0]),s},M=function(){function t(){this.playAgain=ce(this.playAgain,this),this.handlePlayAgain=ce(this.handlePlayAgain,this),this.endGame=ce(this.endGame,this),this.initGame=ce(this.initGame,this),this.removeMobileInstructions=ce(this.removeMobileInstructions,this),this.initMobileInstructions=ce(this.initMobileInstructions,this),this.playInstructions=ce(this.playInstructions,this),this.setGame=ce(this.setGame,this);var t,e,i;lib.preloader=new F,lib.mainContainer=new _,t="assets/",e=[{id:"sg",src:""+t+"start_game.png"},{id:"pa",src:""+t+"play_again.png"},{id:"s/boing",src:""+t+"boing.mp3"},{id:"s/good",src:""+t+"good.mp3"},{id:"s/wrong",src:""+t+"wrong.mp3"}],this.manifest=function(){var e,s,n,r;for(n=this.manifest,r=[],e=0,s=n.length;s>e;e++)i=n[e],r.push({id:""+i.id,src:""+(t+i.src)});return r}.call(this),Array.prototype.push.apply(this.manifest,e),this._setStage().resize(),"undefined"!=typeof floader&&null!==floader?console.log("cargando italica"):lib.preloader.addEventListener("complete",this.setGame),lib.preloader.load(this.manifest)}return t.prototype.resize=function(){var t,e;return e=window.innerWidth,t=window.innerHeight,d2oda.stage.r=Math.min(e/d2oda.stage.w,t/d2oda.stage.h),lib.mainContainer.scaleX=d2oda.stage.r,lib.mainContainer.scaleY=d2oda.stage.r,$("#oda").width(e),this.stage.canvas.width=e,this.stage.canvas.height=t,lib.mainContainer.x=this.stage.canvas.width/2,lib.mainContainer.y=this.stage.canvas.height/2,this},t.prototype.setGame=function(){var t;return lib.mainContainer.removeAllChildren(),t=d2oda.utilities.clone(this.game),lib.game=new f(t),this.playInstructions()},t.prototype.playInstructions=function(){var t;return dealersjs.mobile.isIOS()||dealersjs.mobile.isAndroid()?(lib.mainContainer.insertBitmap("start","sg",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.start.addEventListener("click",this.initMobileInstructions),TweenLite.from(lib.start,.3,{alpha:0,y:lib.start+20})):(t=lib.instructions.playSound("s/instructions"),t.addEventListener("complete",this.initGame))},t.prototype.initMobileInstructions=function(t){var e;return e=lib.instructions.playSound("s/instructions"),t.target.removeEventListener("click",this.initMobileInstructions),e.addEventListener("complete",this.initGame),TweenLite.to(lib.start,.3,{alpha:0,y:lib.start.y+20,onComplete:this.removeMobileInstructions})},t.prototype.removeMobileInstructions=function(){return lib.mainContainer.removeChild(lib.start)},t.prototype.initGame=function(){return lib.game.start()},t.prototype.endGame=function(){return createjs.Sound.stop(),lib.mainContainer.insertBitmap("play_again","pa",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.play_again.addEventListener("click",this.handlePlayAgain),TweenLite.from(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20})},t.prototype.handlePlayAgain=function(){return lib.play_again.removeEventListener("click",this.handlePlayAgain),TweenLite.to(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20,onComplete:this.playAgain})},t.prototype.playAgain=function(){return this.setGame()},t.prototype.tick=function(){return this.stage.update()},t.prototype._setStage=function(){return this.stage=new createjs.Stage("oda"),createjs.Ticker.addEventListener("tick",this.stage),createjs.Ticker.setFPS(60),createjs.Touch.enable(this.stage),this.stage.enableMouseOver(50),this.stage.addChild(lib.mainContainer),lib.preloader.mainContainer=lib.mainContainer,this},window.Oda=t,t}(),F=function(){function t(){this.handleComplete=ce(this.handleComplete,this),this.handleProgress=ce(this.handleProgress,this),this.initialize()}return t.prototype=new createjs.EventDispatcher,t.prototype.EventDispatcher_initialize=t.prototype.initialize,t.prototype.initialize=function(){var t,e,i,s,n;for(this.EventDispatcher_initialize(),this.preload=new createjs.LoadQueue(!1),this.loadStep=0,this.barHeight=7,this.barWidth=35,this.loaderColor=null!=(s=$("#oda").data("loadercolor"))?s:"#E62922",this.loaderBar=new createjs.Container,this.loaderBar.x=d2oda.stage.w/2,this.loaderBar.y=d2oda.stage.h/2,n=[],e=i=1;13>=i;e=i+=1)t=new createjs.Shape,t.graphics.setStrokeStyle(1).beginStroke(this.loaderColor).beginFill(this.loaderColor).drawRoundRect(0,0,this.barWidth,this.barHeight,5),t.regX=-20,t.regY=this.barHeight/2,t.rotation=30*(e-1),t.alpha=.05,t.name="bar"+e.toString(),n.push(this.loaderBar.addChild(t));return n},t.prototype.load=function(t){return this.preload.installPlugin(createjs.Sound),this.preload.addEventListener("progress",this.handleProgress),this.preload.addEventListener("complete",this.handleComplete),this.preload.loadManifest(t),this.mainContainer.addChild(this.loaderBar),TweenLite.from(this.loaderBar,1,{alpha:.1,ease:Quart.easeOut}),this},t.prototype.handleProgress=function(t){var e;return e=Math.round(100*this.preload.progress),t.loaded>=this.loadStep/12&&this.loadStep<12?(this.showBar("bar"+(this.loadStep+1)),this.loadStep++):void 0},t.prototype.handleComplete=function(){return this.preload.removeEventListener("progress",this.handleProgress),this.preload.removeEventListener("complete",this.handleComplete),this.dispatchEvent({type:"complete"}),TweenLite.to(this.loaderBar,1,{alpha:0,ease:Quart.easeOut})},t.prototype.showBar=function(t){return TweenLite.to(this.loaderBar.getChildByName(t),2.5,{alpha:1,ease:Quart.easeOut})},window.Preloader=t,t}(),Z=["extended","included"],A=function(){function t(){}return t.extend=function(t,e){var i,s,n;for(i in e)s=e[i],pe.call(Z,i)<0&&(t[i]=s);return null!=(n=e.extended)&&n.apply(t),t},t.include=function(t,e){var i,s,n;for(i in e)s=e[i],pe.call(Z,i)<0&&(t.prototype[i]=s);return null!=(n=e.included)&&n.apply(t),t},window.Module=t,t}(),_=function(){function t(){this.warningComplete=ce(this.warningComplete,this),this.initialize()}return t.prototype=new createjs.Container,t.prototype.Container_initialize=t.prototype.initialize,t.prototype.initialize=function(){return A.extend(this,d2oda.methods),this.Container_initialize(),this.name="mainContainer",this.regX=d2oda.stage.w/2,this.regY=d2oda.stage.h/2},t.prototype.warning=function(){return createjs.Sound.play("s/wrong"),this.prevX=this.x,TweenMax.to(this,.1,{x:this.x+10,repeat:6,yoyo:!0,onComplete:this.warningComplete}),this},t.prototype.warningComplete=function(){return this.x=this.prevX},window.MainContainer=t,t}(),E=function(){function t(){this.subscribers=[]}return t.prototype.notify=function(t){var e,i,s,n,r;for(n=this.subscribers,r=[],i=0,s=n.length;s>i;i++)e=n[i],e.item===t&&r.push(e.callback(t));return r},t.prototype.subscribe=function(t,e){return this.subscribers.push({item:t,callback:e})},t}(),m=function(t){function e(){return oe=e.__super__.constructor.apply(this,arguments)}return ge(e,t),e.NEXT_SCENE="next_scene",e.PREV_SCENE="prev_scene",e.START="start",window.GameObserver=e,e}(E),f=function(){function t(t){this.prevScene=ce(this.prevScene,this),this.nextScene=ce(this.nextScene,this),this.initialize(t)}return t.prototype=new createjs.EventDispatcher,t.prototype.EventDispatcher_initialize=t.prototype.initialize,t.prototype.initialize=function(t){return this.observer=new m,this.setHeader(t.header).setInstructions(t.instructions).setScore(t.score).setScenes(t.scenes)},t.prototype.setHeader=function(t){return lib.mainContainer.insertBitmap("header",t,d2oda.stage.w/2,0,"tc"),TweenLite.from(lib.header,.5,{alpha:0,y:lib.header.y-20}),this},t.prototype.setInstructions=function(t){return lib.instructions=new T(t),lib.mainContainer.add(lib.instructions,!1),t.states.length>1&&(this.observer.subscribe(m.NEXT_SCENE,lib.instructions.next),this.observer.subscribe(m.PREV_SCENE,lib.instructions.prev)),this},t.prototype.setScore=function(t){return lib.score=new B(t),lib.mainContainer.add(lib.score),this},t.prototype.setScenes=function(t){return lib.scenes=new I(t),lib.mainContainer.add(lib.scenes,!1),this.observer.subscribe(m.NEXT_SCENE,lib.scenes.next),this.observer.subscribe(m.PREV_SCENE,lib.scenes.prev),this},t.prototype.start=function(){return lib.scene.init(),lib.scenes.addEventListener("complete",this.finish)},t.prototype.finish=function(){return oda.endGame()},t.prototype.nextScene=function(){return this.observer.notify(m.NEXT_SCENE)},t.prototype.prevScene=function(){return this.observer.notify(m.PREV_SCENE)},window.Game=t,t}(),u=function(){function t(t){A.extend(this,d2oda.methods),this.name=t.id,this.group=t.group,this.current=0,t.invisible&&this.setInvisible(!0,!1)}return t.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u,c,p,d,g,f;switch(t.type){case"blinkAll":for(u=this.group,g=[],i=0,a=u.length;a>i;i++)e=u[i],g.push(lib[e].blink());return g;case"pulseAll":for(c=this.group,f=[],s=0,o=c.length;o>s;s++)e=c[s],f.push(lib[e].pulse());return f;case"fadeIn":for(p=this.group,n=0,h=p.length;h>n;n++)e=p[n],TweenMax.killTweensOf(lib[e]),TweenLite.killTweensOf(lib[e]),lib[e].alpha=0,t.target||lib[e].fadeOut();if(t.target)return lib[t.target].fadeIn();break;case"fadeOut":for(d=this.group,r=0,l=d.length;l>r;r++)e=d[r],TweenMax.killTweensOf(lib[e]),TweenLite.killTweensOf(lib[e]),lib[e].alpha=1,t.target||lib[e].fadeOut();if(t.target)return lib[t.target].fadeOut();break;case"success":return this.target=t.targetGroup,this.next=t.nextGroup,this.success=t.success,lib[this.target].setInvisible(),lib[this.next].setInvisible(),this.setInvisible(!1);case"choose":return this.setInvisible(!1);case"hide":return this.setInvisible()}},t.prototype.setInvisible=function(t,e){var i,s,n,r,a,o,h,l,u;if(null==t&&(t=!0),null==e&&(e=!0),t){for(o=this.group,l=[],s=0,r=o.length;r>s;s++)i=o[s],e?l.push(TweenLite.to(lib[i],.5,{alpha:0})):l.push(lib[i].alpha=0);return l}for(h=this.group,u=[],n=0,a=h.length;a>n;n++)i=h[n],e?u.push(TweenLite.to(lib[i],.5,{alpha:1})):u.push(lib[i].alpha=1);return u},t.prototype.doSwitch=function(){return lib[this.target].update({type:"fadeIn",target:this.success}),lib[this.next].setInvisible(!1),this.setInvisible()},t.prototype.doChoose=function(t){return this.choosen=t},t.prototype.isComplete=function(){return!0},window.ComponentGroup=t,t}(),c=function(t){function e(){return he=e.__super__.constructor.apply(this,arguments)}return ge(e,t),e.UPDATED="component_update",window.ComponentObserver=e,e}(E),l=function(){function t(){}return t.prototype.next=function(){},t.prototype.prev=function(){},t.prototype.update=function(){},t}(),B=function(t){function e(t){this.minusOne=ce(this.minusOne,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i;switch(this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.counter=t.init,this.type=t.type,t.type){case"points":return this.block=!1,i=this.createBitmap("front",t.aimg,0,0),e=this.createBitmap("back",t.bimg,0,0),this.count=this.createText("init",t.init,"24px Quicksand",t.acolor,0,0,"center"),this.total=this.createText("total",t.total,"24px Quicksand",t.bcolor,0,0,"center"),e.x=i.width/4*2,e.y=i.height/4*2,this.total.x=e.x+e.width/2,this.total.y=e.y+e.height/2-this.total.getMeasuredHeight()/2,this.count.x=i.x+i.width/2,this.count.y=i.y+i.height/2-this.count.getMeasuredHeight()/2,this.addChild(e,i,this.count,this.total);case"clock":return i=this.createBitmap("front",t.aimg,0,0),this.count=this.createText("init",t.init,"24px Quicksand",t.acolor,0,0,"center"),this.count.x=i.x+i.width/2,this.count.y=i.y+i.height/2-this.count.getMeasuredHeight()/2,this.addChild(i,this.count)}},e.prototype.start=function(){return this.interval=setInterval(this.minusOne,1e3)},e.prototype.stop=function(){return clearInterval(this.interval)},e.prototype.reset=function(){return this.counter=0,this.updateCount(this.counter)},e.prototype.minusOne=function(){return this.counter--,this.updateCount(this.counter),0===this.counter?(this.stop(),this.dispatchEvent({type:"count_complete"})):void 0},e.prototype.plusOne=function(){return createjs.Sound.play("s/good"),this.block===!0?(this.block=!1,void 0):(this.counter++,this.updateCount(this.counter))},e.prototype.enableBlock=function(){return this.block=!0},e.prototype.updateTotal=function(t){return this.total.text=t},e.prototype.updateCount=function(t){return this.count.text=t},window.Score=e,e}(l),T=function(t){function e(t){this.instructionsComplete=ce(this.instructionsComplete,this),this.prev=ce(this.prev,this),this.next=ce(this.next,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o;if(this.Container_initialize(),this.x=t.x,this.y=t.y,this.states=t.states,this.playing=!1,this.currentState=0,this.custom=this.states[this.currentState].custom,console.log(this.custom),n=new createjs.Shape,n.graphics.beginFill("#bcd748").moveTo(0,0).lineTo(8,5).lineTo(0,10),n.y=5,this.custom===!0)for(e=0,i=14,o=this.states[this.currentState].text,r=0,a=o.length;a>r;r++)s=o[r],"#ital"===s?(this.label=new createjs.Text(this.states[this.currentState].italics[e],"italic 16px Roboto","#000"),e++):this.label=new createjs.Text(s,"16px Roboto","#000"),this.label.x=i,this.addChild(this.label),console.log(this.label),i=i+this.label.getMeasuredWidth()+5;else this.label=new createjs.Text(this.states[this.currentState].text,"16px Roboto","#000"),this.label.x=14,this.addChild(this.label);return this.addChild(n),TweenLite.from(this,.5,{alpha:0,x:this.x-20})},e.prototype.playSound=function(){var t;return this.states[this.currentState].played?void 0:(this.playing=!0,this.states[this.currentState].played=!0,t=createjs.Sound.play(this.states[this.currentState].sound),t.addEventListener("complete",this.instructionsComplete),t)},e.prototype.next=function(){return this.currentState++,this.states.length>1&&this.currentState<this.states.length?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20}),this.playSound()):void 0},e.prototype.prev=function(){return this.currentState--,this.currentState>=0?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20})):this.currentState++},e.prototype.instructionsComplete=function(){return this.playing=!1,this.dispatchEvent({type:"complete"})},window.Instructions=e,e}(l),J=function(t){function e(t){this.openPrompt=ce(this.openPrompt,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),this.x=t.x,this.y=t.y,this.name=null!=(n=t.name)?n:t.id,s=null!=(r=t.font)?r:"Arial 20px",i=null!=(a=t.color)?a:"#333",this.stroke=null!=(o=t.stroke)?o:3,this.scolor=null!=(h=t.scolor)?h:"#333",this.bcolor=null!=(l=t.bcolor)?l:"#FFF",e=null!=(u=t.align)?u:"",this.mainText=this.createText("#{@name}_main","",s,i,0,0,e),this.pastText=this.createText("#{@name}_past","",s,i,0,this.mainText.getMeasuredHeight()+t.margin,e),this.pastText.text="",this.back=new createjs.Shape,this.back.y=this.mainText.getMeasuredHeight()+t.margin,this.add(this.back,!1),this.add(this.pastText,!1),this.add(this.mainText,!1),this.addEventListener("click",this.openPrompt)},e.prototype.openPrompt=function(){var t;return t=prompt("Enter the past simple form of "+this.mainText.text),this.pastText.text=t,t===this.success?this.complete=!0:void 0},e.prototype.update=function(t){return this.pastText.text=t.success,this.mainText.text=t.text,this.success=t.success,this.complete=!1,this.back.graphics.c().f(this.bcolor).dr(0,0,this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()).ss(this.stroke).s(this.scolor).mt(0,this.pastText.getMeasuredHeight()).lt(this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()),this.back.x=-this.pastText.getMeasuredWidth()/2,this.pastText.text="",TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(l),b=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),e=null!=(s=t.align)?s:"",this.name=null!=(n=t.name)?n:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(r=t.scale)?r:1,this.scaleY=null!=(a=t.scale)?a:1,i=this.createBitmap(this.name,t.id,0,0,e),this.width=i.width,this.height=i.height,this.mouseEnabled=!0,this.add(i,!1)},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},e}(l),x=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),e=null!=(s=t.align)?s:"",this.name=null!=(n=t.name)?n:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(r=t.scale)?r:1,this.scaleY=null!=(a=t.scale)?a:1,i=this.createBitmap(this.name,t.id,0,0,e),this.width=i.width,this.height=i.height,this.shape=new createjs.Shape,this.shape.graphics.beginFill("rgba(255,255,255,0.2)").drawRect(0,0,this.width,this.height),this.shape.width=this.width,this.shape.height=this.height,this.setPosition(e,this.shape),this.mouseEnabled=!0,this.droptargets=[this.shape],this.observer=new c,this.add(i,!1),this.add(this.shape,!1)},e.prototype.update=function(t){return this.success=t.success,this.observer.notify(c.UPDATED)},e.prototype.isComplete=function(){return!this.success.length>0
},e}(l),Q=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u,c,p,d,g,f,m,y,w,b;if(this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),s=null!=(c=t.font)?c:"20px Arial",i=null!=(p=t.fcolor)?p:"#333",e=null!=(d=t.align)?d:"",this.name=null!=(g=t.name)?g:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(f=t.scale)?f:1,this.scaleY=null!=(m=t.scale)?m:1,this.parrafo=null!=(y=t.parrafo)?y:!1,this.parrafo===!1)return this.t=this.createText(this.name,t.text,s,i,0,0,e),t.lineWidth&&(this.t.lineWidth=t.lineWidth),t.lineHeight&&(this.t.lineHeight=t.lineHeight),this.width=this.t.getMeasuredWidth(),this.height=this.t.getMeasuredHeight(),this.mouseEnabled=!0,this.add(this.t,!1);for(a=0,h=-5,r=0,w=t.text,b=[],l=0,u=w.length;u>l;l++)o=w[l],"#rtn"===o?(n=this.createText("txt","BLANK",s,i,a,0),a=0,h+=this.height,b.push(this.height=n.getMeasuredHeight())):(n=this.createText("txt",o,s,i,a,h),t.lineWidth&&(n.lineWidth=t.lineWidth),this.width=n.getMeasuredWidth(),this.height=n.getMeasuredHeight(),b.push(this.add(n,!1)));return b},e.prototype.update=function(t){return t.text?this.t.text=t.text:void 0},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},e}(l),X=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),e=null!=(i=t.align)?i:"",this.name=null!=(s=t.name)?s:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(n=t.scale)?n:1,this.scaleY=null!=(r=t.scale)?r:1,this.sprite=this.createSprite(this.name,t.imgs,t.frames,0,0,e),this.width=this.sprite.width,this.height=this.sprite.height,this.mouseEnabled=!0,this.droptargets=new Array,this.observer=new c,this.add(this.sprite,!1)},e.prototype.prevFrame=function(){var t;return t=this.sprite.currentFrame-1,this.sprite.gotoAndStop(t)},e.prototype.nextFrame=function(){var t;return t=this.sprite.currentFrame+1,this.sprite.gotoAndStop(t)},e.prototype.nextStep=function(){return this.storyboard.length>0?(this.sprite.gotoAndStop(this.storyboard[this.sprite.currentFrame]),TweenLite.from(this,.3,{alpha:0})):void 0},e.prototype.goto=function(t){return this.sprite.gotoAndStop(t)},e.prototype.update=function(t){var e;return this.complete=null!=(e=t.complete)?e:!1,this.droptargets=[this.sprite],this.success=t.success,this.storyboard=t.storyboard,this.observer.notify(c.UPDATED)},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,this.complete||this.sprite.currentFrame>0,this.complete},e}(l),H=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a;this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),A.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.firstPlay=!0,this.currentLabel=0,this.labels=new Array,n=function(){var e,s,n,r;for(n=t.images,r=[],e=0,s=n.length;s>e;e++)i=n[e],r.push(lib.preloader.preload.getResult(i));return r}();for(s in t.animations)this.labels.push(s);return e=null!=(a=t.framerate)?a:24,console.log(e),this.spritesheet=new createjs.SpriteSheet({framerate:e,images:n,frames:t.frames,animations:t.animations}),this.animation=new createjs.BitmapAnimation(this.spritesheet),this.add(this.animation,!1),this.animation.gotoAndStop(this.labels[this.currentLabel])},e.prototype.nextAnimation=function(){return this.firstPlay?(this.firstPlay=!1,this.playAnimation(),void 0):(this.currentLabel++,this.animation.gotoAndPlay(this.labels[this.currentLabel]),!1)},e.prototype.prevAnimation=function(){return this.firstPlay?(this.firstPlay=!1,this.playAnimation(),void 0):(this.currentLabel--,this.animation.gotoAndPlay(this.labels[this.currentLabel]),!1)},e.prototype.playAnimation=function(t){var e,i,s;if(t)for(e=i=0,s=this.labels.length;s>=0?s>=i:i>=s;e=s>=0?++i:--i)label===t&&(this.currentLabel=e);return this.animation.gotoAndPlay(this.labels[this.currentLabel])},e}(l),d=function(t){function e(t){this.evaluateDrop=ce(this.evaluateDrop,this),this.handleMouseDown=ce(this.handleMouseDown,this),this.update=ce(this.update,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o=this;switch(this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),A.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.pos={x:this.x,y:this.y},this.index=t.index,this.eval=t.eval,this.droptargets=new Array,e=this.createBitmap(this.name,t.id,0,0),this.bmpname=t.name,this.bmpid=t.id,this.width=e.width,this.height=e.height,this.dragged=!1,this.setPosition(t.align),t.afterSuccess){case"drop":this.afterSuccess=this.dropInPlace;break;case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(t.afterFail){case"drop":this.afterFail=this.dropInPlace;break;case"hide":this.afterFail=this.hide;break;case"inplace":this.afterFail=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(this.add(e,!1),this.target=this.isArray(t.target)?t.target:lib[t.target],this.target)if(this.isArray(this.target))for(a=this.target,s=0,n=a.length;n>s;s++)i=a[s],lib[i].observer.subscribe(c.UPDATED,this.update);else this.target.observer.subscribe(c.UPDATED,this.update);return this.addEventListener("mousedown",this.handleMouseDown),t.click?this.addEventListener("click",function(){return window.d2oda.evaluator.evaluate(t.click,o.name,o.target)}):void 0},e.prototype.update=function(){var t,e,i,s,n;if(this.isArray(this.target)){for(t=new Array,n=this.target,i=0,s=n.length;s>i;i++)e=n[i],t.merge(lib[e].droptargets);return this.droptargets=t}return this.droptargets=this.target.droptargets},e.prototype.handleMouseDown=function(t){var e,i,s,n=this;return i=t.stageX/d2oda.stage.r,s=t.stageY/d2oda.stage.r,e={x:i-this.x,y:s-this.y},this.x=i-e.x,this.y=s-e.y,t.addEventListener("pressmove",function(t){return n.dragged=!0,i=t.stageX/d2oda.stage.r,s=t.stageY/d2oda.stage.r,n.x=i-e.x,n.y=s-e.y,!1}),t.addEventListener("pressup",function(){return n.droptargets&&n.droptargets.length>0?n.evaluateDrop(t):n.dispatchEvent({type:"drop"}),!1}),!1},e.prototype.evaluateDrop=function(){var t,e,i,s,n,r,a;for(s=null,e=!1,a=this.droptargets,n=0,r=a.length;r>n;n++)t=a[n],i=t.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),t.hitTest(i.x,i.y)&&(s=t,e=!0);return e?(this.dispatchEvent({type:"dropped",drop:s}),d2oda.evaluator.evaluate(this.eval,this.name,s)):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},e}(l),s=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n=this;return this.Container_initialize(),A.extend(this,d2oda.actions),A.extend(this,d2oda.methods),A.extend(this,d2oda.utilities),this.x=t.x,this.y=t.y,this.visible=null!=(e=t.visible)?e:!0,this.index=t.index,this.name=null!=(i=t.name)?i:t.id,this.scale=null!=(s=t.scale)?s:1,this.states=t.states,this.currentState=0,this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.target=this.isArray(t.target)?t.target:lib[t.target],t.target&&(this.target=lib[t.target]),this.addEventListener("mouseover",function(){return TweenLite.to(n,.5,{scaleX:1.2,scaleY:1.2})}),this.addEventListener("mouseout",function(){return TweenLite.to(n,.5,{scaleX:n.scale,scaleY:n.scale})}),t.noHover&&this.removeAllEventListeners(),this.addEventListener("click",function(){return t.isRepeat?d2oda.evaluator.evaluate("repeat"):t.isFinish?d2oda.evaluator.evaluate("finish",null,t.target):d2oda.evaluator.evaluate(t.eval,n.name,t.target)})},e.prototype.setImageText=function(t,e){var i,s,n,r,a,o,h,l,u,c,p,d,g,f,m,y,w,b;if(this.removeAllChildren(),this.alpha=1,t&&(l=null!=(p=t.x)?p:0,u=null!=(d=t.y)?d:0,i=null!=(g=t.align)?g:"",s=this.createBitmap("img",t.name,l,u,i),t.scale&&(s.scaleX=s.scaleY=t.scale),this.add(s,!1)),e){switch(h=null!=(f=e.text)?f:"",r=null!=(m=e.font)?m:"20px Arial",n=null!=(y=e.color)?y:"#333",l=null!=(w=e.x)?w:0,u=null!=(b=e.y)?b:0,i=null!=(c=e.align)?c:"",o=this.createText("txt",h,r,n,l,u,i),e.lineWidth&&(o.lineWidth=e.lineWidth),a=new createjs.Shape,i){case"center":a.graphics.beginFill("#000").drawRect(-5-o.getMeasuredWidth()/2,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6);break;case"right":a.graphics.beginFill("#000").drawRect(-5-o.getMeasuredWidth(),-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6);break;default:a.graphics.beginFill("#000").drawRect(-5,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6)}return o.hitArea=a,this.add(o,!1)}},e.prototype.updateState=function(){return this.currentState++,this.currentState<this.states.length?(TweenLite.killTweensOf(this),this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.scaleX=this.scaleY=this.scale,this.states[this.currentState].removeListeners&&this.removeAllEventListeners(),TweenLite.from(this,.3,{alpha:0})):this.currentState--},e.prototype.update=function(t){return TweenLite.killTweensOf(this),(t.img||t.txt)&&this.setImageText(t.img,t.txt),t.visible&&(this.visible=t.visible),TweenLite.from(this,.5,{alpha:0})},e.prototype.isComplete=function(){return!0},e}(l),n=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(e=t.name)?e:t.id,this.cartas=t.cartas,this.fila=0,this.card=t.card,this.cols=t.cols,this.distx=t.distx,this.disty=t.disty,this.target=null!=(i=t.target)?i:"global",this.eval=t.eval},e.prototype.update=function(){var t,e,i,n,r,a,o,h,l,u,c;for(this.currentX=0,this.currentCard=0,n=0,t=new Array,o=d2oda.utilities.shuffleNoRepeat(this.cartas,6),u=0,c=o.length;c>u;u++)e=o[u],h=this.currentX*this.distx,l=this.fila*this.disty,r={id:"carta_"+this.currentCard,x:h,y:l,index:e,target:this.target,eval:this.eval,states:[{img:{name:e,x:0,y:0,align:"mc"}},{img:{name:this.card,x:0,y:0,align:"mc"}},{img:{name:e,x:0,y:0,align:"mc"}}]},i=new s(r),t.push(i),this.add(i),console.log(i),this.currentCard++,this.currentX++,n++,this.currentX>this.cols-1&&(this.currentX=0,this.fila++);return this.shuffleAnswers=a=d2oda.utilities.shuffleNoRepeat(o,6),this.delay(5e3,function(){var i,s;for(i=0,s=t.length;s>i;i++)e=t[i],e.updateState(),this.checkcard;return d2oda.evaluator.success=a[0],createjs.Sound.play("s/"+a[0])}),lib.scene.snd="s/"+this.shuffleAnswers[0],this.i=0},e.prototype.nextCard=function(){return this.i++,createjs.Sound.stop(),this.i<this.shuffleAnswers.length?(d2oda.evaluator.success=this.shuffleAnswers[this.i],console.log(d2oda.evaluator.success),lib.scene.snd="s/"+this.shuffleAnswers[this.i],createjs.Sound.play("s/"+this.shuffleAnswers[this.i])):void 0},e.prototype.isComplete=function(){return!0},e}(l),r=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(e=t.name)?e:t.id,this.target=t.target,this.eval=t.eval,this.label=t.label,this.bullets=t.bullets},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l=this;return this.removeAllChildren(),i=this.createText(""+this.name+"_before",t.before,this.label.font,this.label.color,0,0),this.add(i),a=this.createText(""+this.name+"_opt1",t.opt1,"bold "+this.bullets.font,this.bullets.color,i.x+i.getMeasuredWidth()+10,0),s=new createjs.Shape,s.graphics.beginFill("#000").drawRect(-5,-3,a.getMeasuredWidth()+10,a.getMeasuredHeight()+6),a.hitArea=s,a.index=1,h=this.createText(""+this.name+"_slash","/",this.label.font,this.label.color,a.x+a.getMeasuredWidth()+10,0),this.add(h),o=this.createText(""+this.name+"_opt2",t.opt2,"bold "+this.bullets.font,this.bullets.color,h.x+h.getMeasuredWidth()+10,0),n=new createjs.Shape,n.graphics.beginFill("#000").drawRect(-5,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6),o.hitArea=n,o.index=2,r="."===t.after?0:10,e=this.createText(""+this.name+"_after",t.after,this.label.font,this.label.color,o.x+o.getMeasuredWidth()+r,0),this.add(e),this.add(a),a.addEventListener("mouseover",function(){return TweenLite.to(a,.5,{alpha:.5})}),a.addEventListener("mouseout",function(){return TweenLite.to(a,.5,{alpha:1})}),a.addEventListener("click",function(){return d2oda.evaluator.evaluate(l.eval,""+l.name+"_opt1",l.target)}),this.add(o),o.addEventListener("mouseover",function(){return TweenLite.to(o,.5,{alpha:.5})}),o.addEventListener("mouseout",function(){return TweenLite.to(o,.5,{alpha:1})}),o.addEventListener("click",function(){return d2oda.evaluator.evaluate(l.eval,""+l.name+"_opt2",l.target)}),this.width=e.x+e.getMeasuredWidth(),this.setPosition("tc"),TweenLite.from(this,.5,{y:this.y-20,alpha:0})},e.prototype.isComplete=function(){return!0},e}(l),a=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(e=t.name)?e:t.id,this.target=t.target,this.eval=t.eval,this.label=t.label,this.caption=t.caption,this.bullets=t.bullets},e.prototype.update=function(t){var e,i,s,n,r,a,o,h=this;switch(this.removeAllChildren(),t.type){case"img":r=this.createBitmap(""+this.name+"_opt1",t.opt1,0,100,"tr"),r.index=1,a=this.createBitmap(""+this.name+"_opt2",t.opt2,0,100),a.index=2;break;case"txt":t.img&&(e=this.insertBitmap(""+this.name+"_img",t.img.name,t.img.x,t.img.y,"tc"),t.img.scale&&(e.scaleY=e.scaleX=t.img.scale)),n=this.bullets.lineWidth?this.bullets.lineWidth:200,this.insertText("separator","/",this.bullets.font,this.bullets.color,0,400,"center"),o=Math.round(Math.random()),1===o?(r=this.createText(""+this.name+"_opt1",t.opt1,this.bullets.font,this.bullets.color,-20,400,"right"),this.bullets.lineWidth&&(r.lineWidth=this.bullets.lineWidth),i=new createjs.Shape,i.graphics.beginFill("#000").drawRect(-r.getMeasuredWidth()-5,-3,r.getMeasuredWidth()+10,r.getMeasuredHeight()+6),r.hitArea=i,r.index=1,a=this.createText(""+this.name+"_opt2",t.opt2,this.bullets.font,this.bullets.color,20,400,"left"),this.bullets.lineWidth&&(a.lineWidth=this.bullets.lineWidth),s=new createjs.Shape,s.graphics.beginFill("#000").drawRect(-5,-3,a.getMeasuredWidth()+10,a.getMeasuredHeight()+6),a.hitArea=s,a.index=2):(r=this.createText(""+this.name+"_opt1",t.opt1,this.bullets.font,this.bullets.color,20,400,"left"),this.bullets.lineWidth&&(r.lineWidth=this.bullets.lineWidth),i=new createjs.Shape,i.graphics.beginFill("#000").drawRect(-5,-3,r.getMeasuredWidth()+10,r.getMeasuredHeight()+6),r.hitArea=i,r.index=1,a=this.createText(""+this.name+"_opt2",t.opt2,this.bullets.font,this.bullets.color,-20,400,"right"),this.bullets.lineWidth&&(a.lineWidth=this.bullets.lineWidth),s=new createjs.Shape,s.graphics.beginFill("#000").drawRect(-a.getMeasuredWidth()-5,-3,a.getMeasuredWidth()+10,a.getMeasuredHeight()+6),a.hitArea=s,a.index=2)}return this.add(r),r.addEventListener("mouseover",function(){return TweenLite.to(r,.5,{alpha:.5})}),r.addEventListener("mouseout",function(){return TweenLite.to(r,.5,{alpha:1})}),r.addEventListener("click",function(){return d2oda.evaluator.evaluate(h.eval,""+h.name+"_opt1",h.target)}),this.add(a),a.addEventListener("mouseover",function(){return TweenLite.to(a,.5,{alpha:.5})}),a.addEventListener("mouseout",function(){return TweenLite.to(a,.5,{alpha:1})}),a.addEventListener("click",function(){return d2oda.evaluator.evaluate(h.eval,""+h.name+"_opt2",h.target)}),t.label&&this.insertText(""+this.name+"_label",t.label,this.label.font,this.label.color,0,40,"center"),t.caption&&this.insertText(""+this.name+"_caption",t.caption,this.caption.font,this.caption.color,0,360,"center"),TweenLite.from(this,.5,{alpha:0})},e.prototype.isComplete=function(){return!0},e}(l),C=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(n=t.name)?n:t.id,s=null!=(r=t.font)?r:"Arial 20px",i=null!=(a=t.color)?a:"#333",e=null!=(o=t.align)?o:"",this.text=this.createText("txt","",s,i,0,0,e),t.lineWidth&&(this.text.lineWidth=t.lineWidth),this.add(this.text,!1)},e.prototype.update=function(t){return this.text.text=t.text,this.success=t.success,this.complete=!1,TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return this.complete},e}(l),o=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r;return this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=null!=(i=t.x)?i:0,this.y=null!=(s=t.y)?s:0,this.uwidth=null!=(n=t.uwidth)?n:100,this.uheight=null!=(r=t.uheight)?r:100,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,l;for(this.removeAllChildren(),n=0,r=0,l=t.containers,a=0,o=l.length;o>a;a++)e=l[a],s=e.opts?e.opts:t,i=new h(s,e.type,e.success,e.x,e.y,this.uwidth,this.uheight),this.droptargets.push(i),this.add(i,!1);return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(l),h=function(t){function e(t,e,i,s,n,r,a){this.initialize(t,e,i,s,n,r,a)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n,r,a){var o,h;return this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(h=t.name)?h:t.id,this.x=null!=s?s:0,this.y=null!=n?n:0,this.width=r,this.height=a,this.success=i,this.complete="#empty"!==this.success?!1:!0,this.img=null,o=new createjs.Shape,o.graphics.beginFill("#FFF").drawRect(0,0,this.width,this.height),o.alpha=.1,this.add(o,!1)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t,e){return null==t&&(t=!0),null==e&&(e=""),null!==this.img&&this.removeChild(this.img),this.img=this.createBitmap("img",e,this.width/2,this.height/2,"mc"),this.img.scaleX=this.img.scaleY=(this.height-5)/this.img.height,this.add(this.img,!1),this.complete=t},e}(l),Y=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s;return this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=null!=(i=t.x)?i:0,this.y=null!=(s=t.y)?s:0,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,h;for(this.removeAllChildren(),n=0,r=0,h=t.containers,a=0,o=h.length;o>a;a++)e=h[a],s=e.opts?e.opts:t,i=new G(s,e.type,e.success,e.x,e.y),this.droptargets.push(i),this.add(i,!1);return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(l),G=function(t){function e(t,e,i,s,n){this.initialize(t,e,i,s,n)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n){var r,a,o;switch(this.Container_initialize(),A.extend(this,d2oda.methods),this.x=null!=s?s:0,this.y=null!=n?n:0,this.width=null!=(a=t.width)?a:t.radius,this.height=null!=(o=t.height)?o:t.radius,this.success=i,this.complete=!1,e){case"rshp":r=new createjs.Shape,r.graphics.beginFill(t.bcolor).setStrokeStyle(t.stroke).beginStroke(t.scolor).drawRoundRect(0,0,t.width,t.height,t.radius)}return this.add(r,!1)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t){return null==t&&(t=!0),this.complete=t},e}(l),y=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u,c,p,d,g,f,m,y,w,b,x,v,T,C,S,k;switch(this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.utilities),this.x=null!=(y=t.x)?y:0,this.y=null!=(w=t.y)?w:0,this.columns=null!=(b=t.columns)?b:1,this.rows=null!=(x=t.rows)?x:1,this.uwidth=null!=(v=t.uwidth)?v:100,this.uheight=null!=(T=t.uheight)?T:100,this.name=null!=(C=t.name)?C:t.id,this.currentTarget=0,this.warnings=0,this.targets=new Array,t.label&&(o=null!=(S=t.label.font)?S:"Arial 20px",n=null!=(p=t.label.color)?p:"#333",e=null!=(d=t.label.align)?d:"",h=null!=(g=t.label.x)?g:0,l=null!=(f=t.label.y)?f:0,this.text=this.createText("txt","",o,n,h,l,e),this.add(this.text)),this.cells=t.mixed?this.shuffle(t.cells):t.cells,t.align){case"evenodd":for(r=0,a=0,m=this.cells,k=[],u=0,c=m.length;c>u;u++)s=m[u],h=a%2===0?r*this.uwidth:(this.columns-1-r)*this.uwidth,i=this.insertBitmap(s.img,s.img,h,a*this.uheight,"mc"),this.targets.push(i),r++,r===this.columns?(r=0,k.push(a++)):k.push(void 0);return k}},e.prototype.update=function(){var t;return t=this.cells[this.currentTarget],this.success=t.success,this.text.text=t.txt,this.targets[this.currentTarget].complete=!1,this.blink(this.targets[this.currentTarget]),TweenLite.from(this.text,.3,{alpha:0,y:this.text.y-10})},e.prototype.fadeOut=function(t){return TweenMax.killTweensOf(t),TweenLite.killTweensOf(t),TweenLite.to(t,.5,{alpha:0,y:t.y-20})},e.prototype.blink=function(t,e){var i;return null==e&&(e=!0),TweenMax.killTweensOf(t),i=1,e?TweenMax.to(t,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.targets,e=0,i=s.length;i>e;e++)if(t=s[e],t.complete===!1)return!1;return!0},e}(l),O=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l;return this.Container_initialize(),A.extend(this,d2oda.actions),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=null!=(i=t.margin)?i:10,this.font=null!=(s=t.font)?s:"20px Arial",this.fcolor=null!=(n=t.fcolor)?n:"#333",this.bcolor=null!=(r=t.bcolor)?r:"#FFF",this.scolor=null!=(a=t.scolor)?a:"#333",this.stroke=null!=(o=t.stroke)?o:3,this.name=null!=(h=t.name)?h:t.id,this.align=null!=(l=t.align)?l:"",this.uwidth=t.uwidth,this.underline=null!=(e=t.underline)?e:{y:5},this.lineHeight=t.lineHeight,this.currentTarget=0,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u,p,d,g,f,m,y;for(this.removeAllChildren(),t.h2&&(e=null!=(f=t.h2.align)?f:"",n=this.createText("h2",t.h2.text,this.font,this.color,t.h2.x,t.h2.y,e),this.add(n,!1)),t.nextGroup&&(this.nextGroup=t.nextGroup),a=0,h=0,p=null!=(m=t.ypos)?m:-5,o=0,y=t.pattern,d=0,g=y.length;g>d;d++)l=y[d],"#tcpt"===l?(u=t.targets[a],this.uwidth?r={text:u.text,width:this.uwidth}:(r=u,r.maxlength&&(s=this.createText("max",r.maxlength,this.font,this.fcolor,0,0),r={text:u.text,width:s.getMeasuredWidth()+this.margin})),r.underline=this.underline,s=new U(r,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,h,p),this.droptargets.push(s),this.add(s,!1),h+=s.width+this.margin,h>o&&(o=h),a++):"#rtn"===l?this.lineHeight?(h=0,p+=this.lineHeight):(h=0,h>o&&(o=h),this.lineHeight?p+=this.lineHeight:(s=this.createText("txt","BLANK",this.font,this.fcolor,h,0),p+=s.getMeasuredHeight()+.1*s.getMeasuredHeight())):(i=l.charAt(0),("."===i||"!"===i||"?"===i||","===i)&&(h-=this.margin),s=this.createText("txt",l,this.font,this.fcolor,h,p),this.add(s,!1),h+=s.getMeasuredWidth()+this.margin,h>o&&(o=h));return this.width=o,this.setPosition(this.align),this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.clearChildren=function(){var t,e,i,s,n;for(s=this.droptargets,n=[],e=0,i=s.length;i>e;e++)t=s[e],n.push(t.clearBackground());return n},e.prototype.getEnabledTarget=function(){var t,e,i,s,n;for(t={success:!1},n=this.droptargets,i=0,s=n.length;s>i;i++)e=n[i],e.writeEnabled&&(t=e);return t},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.droptargets,e=0,i=s.length;i>e;e++)if(t=s[e],t.complete===!1)return!1;return!0},e}(l),j=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=null!=(e=t.margin)?e:10,this.font=null!=(i=t.font)?i:"20px Arial",this.fcolor=null!=(s=t.fcolor)?s:"#333",this.bcolor=null!=(n=t.bcolor)?n:"#FFF",this.scolor=null!=(r=t.scolor)?r:"#333",this.stroke=null!=(a=t.stroke)?a:3,this.name=null!=(o=t.name)?o:t.id,this.align=null!=(h=t.align)?h:"",this.currentTarget=0,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u,p,d,g,f,m;for(this.removeAllChildren(),t.h2&&(e=null!=(d=t.h2.align)?d:"",s=this.createText("h2",t.h2.text,this.font,this.color,t.h2.x,t.h2.y,e),this.add(s,!1)),n=0,a=0,l=null!=(g=t.ypos)?g:-5,r=0,f=t.pattern,u=0,p=f.length;p>u;u++)o=f[u],"#tcpt"===o?(h=t.targets[n],i=new N(h,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,a,l),this.droptargets.push(i),this.add(i,!1),r=a+=i.width+this.margin,n++):"#rtn"===o?(i=this.createText("txt","BLANK",this.font,this.fcolor,a,l),a>r&&(r=a),a=0,l+=i.getMeasuredHeight()+.1*i.getMeasuredHeight()):(i=this.createText("txt",o,this.font,this.fcolor,a,l),this.add(i,!1),r=a+=i.getMeasuredWidth()+this.margin),("."===(m=o.charAt(0))||","===m||"?"===m||"!"===m)&&(console.log("coma"),i.x=i.x-this.margin);return this.width=r,this.setPosition(this.align),this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(l),N=function(t){function e(t,e,i,s,n,r,a,o){this.initialize(t,e,i,s,n,r,a,o)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n,r,a,o){var h,l,u;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=a,this.y=o,this.success=null!=(h=t.success)?h:t.text,this.text=this.createText("txt",t.text,e,i,0,-2),this.width=null!=(l=t.width)?l:this.text.getMeasuredWidth(),this.height=null!=(u=t.height)?u:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.back.graphics.f(s).dr(0,0,this.width,this.height).ss(r).s(n).mt(0,this.height).lt(this.width,this.height),this.add(this.back,!1),this.add(this.text,!1),this.text.text=""},e.prototype.setRectOutline=function(t,e,i){return this.back.graphics.f(t).ss(e).s(i).dr(0,0,this.width,this.height)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t,e){return null==e&&(e=!0),this.complete=e,this.text.text=t,this.text.textAlign="center",this.text.x=this.width/2,TweenLite.from(this,.3,{alpha:0})},e}(l),K=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u=this;return this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(i=t.name)?i:t.id,this.x=t.x,this.y=t.y,this.font=null!=(s=t.font)?s:"20px Arial",this.fcolor=null!=(n=t.fcolor)?n:"#333",this.bcolor=null!=(r=t.bcolor)?r:"#FFF",this.shcolor=null!=(a=t.shcolor)?a:"#F00",this.shape=null!=(o=t.shape)?o:"rect",this.uwidth=null!=(h=t.uwidth)?h:100,this.uheight=null!=(l=t.uheight)?l:100,this.radius=null!=(e=t.radius)?e:0,this.allComplete=!1,this.observer=new c,this.droptargets=new Array,this.path=new Array,this.addEventListener("mousedown",function(t){return u.path=new Array,u.getLetterContainer(),t.addEventListener("pressmove",function(){return u.getLetterContainer()}),t.addEventListener("pressup",function(){var t,e,i,s,n,r,a,o,h,l,c,p,d,g,f,m,y;for(e=!1,o=u.path.unique(),a=function(){var e,i,s;for(s=[],e=0,i=o.length;i>e;e++)t=o[e],s.push(t.name);return s}(),a.sort(),m=u.words,c=0,g=m.length;g>c;c++)if(l=m[c],l.enabled){for(n=new Array,h=l.coords.sort(),s=p=0,y=h.length;y>=0?y>p:p>y;s=y>=0?++p:--p)n[s]="l"+h[s];i=n.compare(a),i&&(e=!0,l.complete=!0,l.fx?lib[l.target][l.fx]():lib[l.target].fadeOut(),lib.scene.success())}if(!e){for(d=0,f=o.length;f>d;d++)r=o[d],r.showShape(!1);return lib.scene.fail()}}),!1})},e.prototype.getLetterContainer=function(){var t,e,i;return i=this.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),e=this.getObjectUnderPoint(i.x,i.y),t=e.parent,t&&t instanceof S?(t.showShape(),this.path.push(t)):void 0},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u;for(this.removeAllChildren(),this.words=t.words,i=0,s=0,u=t.matrix,a=0,h=u.length;h>a;a++){for(r=u[a],o=0,l=r.length;l>o;o++)e=r[o],n=new S({text:e,width:this.uwidth,height:this.uheight,radius:this.radius},this.font,this.fcolor,this.bcolor,this.shcolor,this.shape,s*this.uwidth,i*this.uheight),n.name="l"+s+"_"+i,this.add(n),this.droptargets.push(n),s++;s=0,i++}return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.words,e=0,i=s.length;i>e;e++)t=s[e],t.complete===!1;return!0},e}(l),p=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h;return this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=t.x,this.y=t.y,this.font=null!=(i=t.font)?i:"20px Arial",this.fcolor=null!=(s=t.fcolor)?s:"#333",this.bcolor=null!=(n=t.bcolor)?n:"#FFF",this.stroke=null!=(r=t.stroke)?r:2,this.scolor=null!=(a=t.scolor)?a:"#FFF",this.uwidth=null!=(o=t.uwidth)?o:100,this.uheight=null!=(h=t.uheight)?h:100,this.allComplete=!1,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u,p,d,g,f;for(this.removeAllChildren(),this.words=t.words,n=h=1,g=this.words.length;g>=1?g>=h:h>=g;n=g>=1?++h:--h)o=this.insertText("txt"+n,""+n,this.font,this.fcolor,this.words[n-1].x,this.words[n-1].y),this.words[n-1].eval&&(o.eval=this.words[n-1].eval,o.target=this.words[n-1].target,o.index=this.words[n-1].index,o.addEventListener("click",function(t){return d2oda.evaluator.evaluate(t.target.eval,t.target.name,t.target.target)}));for(i=0,s=0,f=t.matrix,l=0,p=f.length;p>l;l++){for(r=f[l],u=0,d=r.length;d>u;u++)e=r[u],"#"!==e&&("-"===e?(a=new createjs.Shape,a.graphics.f("#999").ss(this.stroke).s(this.scolor).dr(0,0,this.uwidth,this.uheight),a.x=s*this.uwidth,a.y=i*this.uheight):(a=new U({text:e,width:this.uwidth,height:this.uheight,underline:{y:0}},this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,s*this.uwidth,i*this.uheight),a.name="l"+s+i,a.setRectOutline(this.bcolor,this.stroke,this.scolor)),this.add(a),this.droptargets.push(a)),s++;
s=0,i++}return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.fadeOut=function(t){return TweenMax.killTweensOf(t),TweenLite.killTweensOf(t),TweenLite.to(t,.5,{alpha:0,y:t.y-20})},e.prototype.clearChildren=function(){var t,e,i,s,n;for(s=this.droptargets,n=[],e=0,i=s.length;i>e;e++)t=s[e],t.clearBackground(),n.push(t.setRectOutline(this.bcolor,this.stroke,this.scolor));return n},e.prototype.getEnabledTarget=function(){var t,e,i,s,n;for(t={success:!1},n=this.droptargets,i=0,s=n.length;s>i;i++)e=n[i],e.writeEnabled&&(t=e);return t},e.prototype.evaluateWords=function(){var t,e,i,s,n,r,a,o,h,l;for(h=this.words,l=[],n=0,a=h.length;a>n;n++){for(i=h[n],t=i.coords,s=!0,r=0,o=t.length;o>r;r++)e=t[r],lib["l"+e].complete||(s=!1);i.complete?l.push(void 0):s?(i.complete=!0,lib[i.target]&&this.fadeOut(lib[i.target]),lib["number"+i.target]&&this.fadeOut(lib["number"+i.target]),createjs.Sound.play("s/"+i.target),l.push(lib.scene.success())):l.push(void 0)}return l},e.prototype.isComplete=function(){var t,e,i,s;for(this.allComplete=!0,s=this.words,e=0,i=s.length;i>e;e++)t=s[e],t.complete||(this.allComplete=!1);return this.allComplete},e}(l),t=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,r,a,o,h,l,u,c,p;for(this.Container_initialize(),A.extend(this,d2oda.methods),this.name=null!=(u=t.name)?u:t.id,this.x=t.x,this.y=t.y,this.eval=t.eval,this.target=t.target,e="abcdefghijklmnopqrstuvwxyz",i=e.split(""),this.abccollection=new Array,r=0,h=0,l=i.length;l>h;h++)a=i[h],r>=13?(c=(r-13)*(t.uwidth+t.margin),p=t.uheight):(c=r*(t.uwidth+t.margin),p=0),t.clickable?(o={id:"abc_"+r,x:c,y:p,index:a,target:this.target,eval:this.eval,states:[{txt:{text:a,name:a,font:t.font,color:t.fcolor}}]},n=new s(o)):(o={id:"abc_"+r,x:c,y:p,index:a,target:this.target,eval:this.eval,text:a,font:t.font,color:t.fcolor,afterSuccess:"origin",afterFail:"return"},n=new k(o)),this.abccollection.push(n),this.add(n),r++;return this.width=c+t.uwidth,this.height=2*p,this.setPosition("mc"),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.update=function(t){var e,i,s,n,r;if(t.reset){for(n=this.abccollection,r=[],i=0,s=n.length;s>i;i++)e=n[i],r.push(e.visible=!0);return r}},e.prototype.isComplete=function(){return!0},e}(l),q=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.utilities),this.name=null!=(i=t.name)?i:t.id,this.x=t.x,this.y=t.y,this.uwidth=null!=(s=t.uwidth)?s:25,this.bcolor=null!=(n=t.bcolor)?n:"#FFF",this.scolor=null!=(r=t.scolor)?r:"#333",this.fcolor=null!=(a=t.fcolor)?a:"#333",this.font=null!=(o=t.font)?o:"20px Arial",this.stroke=null!=(h=t.stroke)?h:3,this.align=null!=(l=t.align)?l:"",this.margin=null!=(e=t.margin)?e:5,this.eval=t.eval,this.currentTarget=0,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o;for(this.removeAllChildren(),this.droptargets=new Array,this.target=t.target,r=t.word.split(""),i=0,t.prev?(this.prev=this.insertText("prevTxt",t.prev,this.font,this.fcolor,0,0),n=this.prev.getMeasuredWidth()+this.margin):n=0,a=0,o=r.length;o>a;a++)s=r[a]," "===s?n+=this.margin:(t={text:s,width:this.uwidth},e=new U(t,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,n,5),this.droptargets.push(e),this.add(e,!1),n+=this.uwidth+this.margin),i++;return this.width=n,this.setPosition(this.align),i=0,n=this.prev?this.prev.getMeasuredWidth()+this.margin:0,this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.droptargets,e=0,i=s.length;i>e;e++)if(t=s[e],t.complete===!1)return!1;return!0},e}(l),R=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u,p,d;return this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),A.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.uwidth=null!=(a=t.uwidth)?a:25,this.distance=null!=(o=t.distance)?o:0,this.bcolor=null!=(h=t.bcolor)?h:"#FFF",this.scolor=null!=(l=t.scolor)?l:"#333",this.fcolor=null!=(u=t.fcolor)?u:"#333",this.font=null!=(p=t.font)?p:"20px Arial",this.sentence=null!=(d=t.sentence)?d:"false",this.stroke=null!=(e=t.stroke)?e:3,this.align=null!=(i=t.align)?i:"",this.margin=null!=(s=t.margin)?s:5,this.oncomplete=null!=(n=t.oncomplete)?n:null,this.eval=t.eval,this.currentTarget=0,this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o,h,l,u,p,d,g,f,m,y,w,b,x,v,T,C,S,_,z,L;if(this.removeAllChildren(),this.target=t.target,this.fx=null!=(L=t.fx)?L:"fadeOut",this.sentence===!1){for(r=0,f=t.word.split(""),p=this.shuffle(f),t.prev?(this.prev=this.insertText("prevTxt",t.prev,this.font,this.fcolor,0,0),o=this.prev.getMeasuredWidth()+this.margin):o=0,y=0,v=f.length;v>y;y++)a=f[y]," "===a?o+=this.margin:(t={text:a,width:this.uwidth},s=new U(t,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,o,5),this.droptargets.push(s),this.add(s,!1),o+=this.uwidth+this.margin),r++;for(this.width=o,this.setPosition(this.align),r=0,o=this.prev?this.prev.getMeasuredWidth()+this.margin:0,w=0,T=p.length;T>w;w++)l=p[w]," "!==l&&(t={id:"l"+this.name+r,x:o,y:-s.height,index:l,target:this.name,eval:this.eval,text:l,font:this.font,color:this.fcolor,afterSuccess:"hide",afterFail:"return"},e=new k(t),this.add(e),o+=this.uwidth+this.margin,r++)}else{for(r=0,d=t.word.split("||"),u=this.shuffle(d),t.prev?(this.prev=this.insertText("prevTxt",t.prev,this.font,this.fcolor,0,0),o=this.prev.getMeasuredWidth()+this.margin):o=0,b=0,C=d.length;C>b;b++)f=d[b]," "===f?o+=this.margin:(t.maxlength?(s=this.createText("max",t.maxlength,this.font,this.fcolor,0,0),n={text:f,width:s.getMeasuredWidth()+this.margin}):n={text:f,width:this.uwidth},s=new U(n,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,o,5),this.droptargets.push(s),this.add(s,!1),o+=n.width+this.margin),r++;for(h=this.insertText("period",".",this.font,this.fcolor,s.x+s.width+3,10,"center"),this.width=o,this.setPosition(this.align),r=0,m=new Array,o=this.prev?this.prev.getMeasuredWidth()+this.margin:0,x=0,S=u.length;S>x;x++)p=u[x]," "!==p&&(t={id:"l"+this.name+r,x:o,y:-s.height,index:p,target:this.name,eval:this.eval,text:p,font:this.font,color:this.fcolor,afterSuccess:"hide",afterFail:"return"},e=new k(t),this.add(e),o+=e.width+this.margin,m.push(e),r<d.length-1&&(h=this.insertText("separator"+r,"/",this.font,this.fcolor,e.x+e.width+this.margin,-s.height,"center"),m.push(h),o+=this.margin),r++);for(g=o,i=(this.width-g)/2,z=0,_=m.length;_>z;z++)f=m[z],f.x=i+f.x,f.pos&&(f.pos.x=f.x)}return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.onComplete=function(){return d2oda.evaluator.evaluate(this.oncomplete["function"],this.name,this.oncomplete.target)},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.droptargets,e=0,i=s.length;i>e;e++)if(t=s[e],t.complete===!1)return!1;return!0},e}(l),U=function(t){function e(t,e,i,s,n,r,a,o){this.initialize(t,e,i,s,n,r,a,o)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n,r,a,o){var h,l,u,c,p=this;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=a,this.y=o,this.success=null!=(h=t.success)?h:t.text,this.text=this.createText("txt",t.text,e,i,0,0),this.width=null!=(l=t.width)?l:this.text.getMeasuredWidth(),this.height=null!=(u=t.height)?u:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.bcolor=null!=s?s:"#FFF",this.stroke=null!=r?r:1,this.scolor=null!=n?n:"#333",this.underline=null!=(c=t.underline)?c:!1,this.word="",this.underline?this.back.graphics.f(this.bcolor).dr(0,0,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height+this.underline.y).lt(this.width,this.height+this.underline.y):this.back.graphics.f(this.bcolor).dr(0,0,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height+5).lt(this.width,this.height+5),this.add(this.back,!1),this.addEventListener("click",function(){return p.parent&&p.parent.clearChildren(),p.writeEnabled=!0,t.underline?p.back.graphics.c().f(p.hexToRGB(p.bcolor,.2)).dr(0,0,p.width,p.height).ss(p.stroke).s(p.scolor).mt(0,p.height+p.underline.y).lt(p.width,p.height+p.underline.y):p.back.graphics.c().f(p.hexToRGB(p.bcolor,.2)).dr(0,0,p.width,p.height).ss(p.stroke).s(p.scolor).mt(0,p.height+5).lt(p.width,p.height+5)})},e.prototype.hexToRGB=function(t,e){var i,s,n,r;return t="#FFF"===t||"#FFFFFF"===t?"#F00":t,n="0123456789ABCDEF",r=16*n.indexOf(t[1])+n.indexOf(t[2]),s=16*n.indexOf(t[3])+n.indexOf(t[4]),i=16*n.indexOf(t[5])+n.indexOf(t[6]),e?"rgba("+r+", "+s+", "+i+", "+e+")":"rgb("+r+", "+s+", "+i+")"},e.prototype.clearBackground=function(){return this.writeEnabled=!1,this.underline?this.back.graphics.c().f(this.bcolor).dr(0,0,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height+this.underline.y).lt(this.width,this.height+this.underline.y):this.back.graphics.c().f(this.bcolor).dr(0,0,this.width,this.height).ss(this.stroke).s(this.scolor).mt(0,this.height+5).lt(this.width,this.height+5)},e.prototype.write=function(t){return t?(this.text.parent||(this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1)),"<-"===t?this.word=this.word.slice(0,this.word.length-1):this.word+="-"===t?" ":t,this.text.text=this.word):this.word},e.prototype.setRectOutline=function(t,e,i){return this.back.graphics.f(t).ss(e).s(i).dr(0,0,this.width,this.height)},e.prototype.update=function(t){return t&&t.complete&&(this.complete=t.complete),this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1),TweenLite.from(this,.3,{alpha:0})},e}(l),S=function(t){function e(t,e,i,s,n,r,a,o){this.initialize(t,e,i,s,n,r,a,o)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n,r,a,o){var h,l,u;switch(this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),A.extend(this,d2oda.utilities),this.mouseChildren=!1,this.x=a,this.y=o,this.name=null!=(h="ltc_"+t.name)?h:"ltc_"+t.text,this.success=null!=(l=t.success)?l:t.text,this.text=this.createText("txt",t.text,e,i,t.width/2,t.height/2-15,"center"),this.width=t.width,this.height=t.height,this.radius=null!=(u=t.radius)?u:"20",this.complete=!1,this.selectionEnabled=!1,this.back=new createjs.Shape,this.shape=new createjs.Shape,this.back.graphics.f(s).dr(0,0,this.width,this.height),r){case"rect":this.shape.graphics.f(n).dr(0,0,this.width,this.height);break;case"round":this.shape.graphics.f(n).rr(0,0,this.width,this.height,this.radius);break;case"circle":this.shape.graphics.f(n).dc(this.width/2,this.height/2,this.radius)}return this.add(this.back,!1),this.add(this.shape,!1),this.add(this.text,!1),this.shape.visible=!1},e.prototype.showShape=function(t){return null==t&&(t=!0),this.shape.visible=t},e.prototype.update=function(){return this.complete=!0},e}(l),k=function(t){function e(t){this.handleMouseDown=ce(this.handleMouseDown,this),this.update=ce(this.update,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a;switch(this.Container_initialize(),A.extend(this,d2oda.methods),A.extend(this,d2oda.actions),A.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.pos={x:this.x,y:this.y},this.index=t.index,this.target=this.isArray(t.target)?t.target:lib[t.target],this.droptargets=new Array,this.eval=t.eval,this.label=this.createText("txt",t.text,t.font,t.color,0,0),this.width=this.label.getMeasuredWidth(),this.height=this.label.getMeasuredHeight(),t.afterSuccess){case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(t.afterFail){case"hide":this.afterFail=this.hide;break;case"inplace":this.afterFail=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(e=new createjs.Shape,e.graphics.beginFill("#000").drawRect(-5,-3,this.label.getMeasuredWidth()+10,this.label.getMeasuredHeight()+6),this.label.hitArea=e,this.add(this.label,!1),this.target)if(this.isArray(this.target))for(a=this.target,s=0,n=a.length;n>s;s++)i=a[s],lib[i].observer.subscribe(c.UPDATED,this.update);else this.target.observer.subscribe(c.UPDATED,this.update);return this.addEventListener("mousedown",this.handleMouseDown)},e.prototype.update=function(){var t,e,i,s,n;if(this.isArray(this.target)){for(t=new Array,n=this.target,i=0,s=n.length;s>i;i++)e=n[i],t.merge(lib[e].droptargets);return this.droptargets=t}return this.droptargets=this.target.droptargets},e.prototype.handleMouseDown=function(t){var e,i,s,n=this;return i=t.stageX/d2oda.stage.r,s=t.stageY/d2oda.stage.r,e={x:i-this.x,y:s-this.y},this.x=i-e.x,this.y=s-e.y,t.addEventListener("pressmove",function(t){return i=t.stageX/d2oda.stage.r,s=t.stageY/d2oda.stage.r,n.x=i-e.x,n.y=s-e.y,!1}),t.addEventListener("pressup",function(){return n.droptargets&&n.droptargets.length>0?n.evaluateDrop(t):n.dispatchEvent({type:"drop"}),!1}),!1},e.prototype.evaluateDrop=function(){var t,e,i,s,n,r,a;for(s=null,e=!1,a=this.droptargets,n=0,r=a.length;r>n;n++)t=a[n],i=t.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),t.hitTest(i.x,i.y)&&(s=t,e=!0);return e?(d2oda.evaluator.evaluate(this.eval,this.name,s),this.dispatchEvent({type:"dropped",drop:s})):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},e}(l),v=function(t){function e(t){this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i;return this.Container_initialize(),A.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=t.margin,this.uwidth=t.uwidth,this.uheight=t.uheight,this.bcolor=t.bcolor,this.scolor=t.scolor,this.stroke=t.stroke,this.name=null!=(e=t.name)?e:t.id,this.align=null!=(i=t.align)?i:"",this.observer=new c,this.droptargets=new Array},e.prototype.update=function(t){var e,i,s,n,r,a,o;for(this.removeAllChildren(),s=0,o=t.containers,r=0,a=o.length;a>r;r++)e=o[r],n=s*(this.uwidth+this.margin),i=new w(e,n,this.uwidth,this.uheight,this.bcolor,this.scolor,this.stroke),this.droptargets.push(i),this.add(i,!1),s++;switch(this.width=(this.uwidth+this.margin)*(s-1),this.align){case"center":this.regX=this.width/2}return this.observer.notify(c.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,s;for(s=this.droptargets,e=0,i=s.length;i>e;e++)if(t=s[e],t.complete===!1)return!1;return!0},e}(l),w=function(t){function e(t,e,i,s,n,r,a){this.initialize(t,e,i,s,n,r,a)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,s,n,r,a){var o,h;return null==e&&(e=0),null==i&&(i=100),null==s&&(s=100),null==n&&(n="#FFF"),null==r&&(r="#333"),null==a&&(a=3),this.Container_initialize(),A.extend(this,d2oda.methods),this.x=e,this.success=t.success,this.image=t.img,this.name=null!=(h=t.name)?h:t.id,this.width=i,this.height=s,this.complete=!1,o=new createjs.Shape,o.graphics.f(n).dr(0,0,i,s).ss(a).s(r).mt(0,s).lt(i,s),this.add(o,!1)},e.prototype.update=function(){var t;return t=this.createBitmap(this.image,this.image,0,-5),t.scaleX=t.scaleY=t.width>t.height?this.width/t.width:this.height/t.height,this.add(t,!1),TweenLite.from(this,.3,{alpha:0})},e}(l),I=function(t){function e(t){this.lastScene=ce(this.lastScene,this),this.prev=ce(this.prev,this),this.next=ce(this.next,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n;for(this.Container_initialize(),this.stack=[],this.currentScene=0,s=0,n=t.length;n>s;s++)e=t[s],i=new P(e),i.visible=!1,this.addChild(i),this.stack.push(i);return this.setCurrent(),TweenLite.from(this,1,{alpha:0})},e.prototype.next=function(){return this.stack[this.currentScene].chooseEnabled?(this.stack[this.currentScene].visible=!1,this.currentScene=this.stack[this.currentScene].choose):this.currentScene++,this.stack.length>1&&this.currentScene<this.stack.length?(this.stack[this.currentScene].chooseEnabled||(this.stack[this.currentScene-1].visible=!1),this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):TweenLite.to(this,1,{alpha:0,delay:1,onComplete:this.lastScene})},e.prototype.prev=function(){return this.currentScene--,this.currentScene>=0?(this.stack[this.currentScene+1].visible=!1,this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):this.currentScene++},e.prototype.lastScene=function(){return"clock"===lib.score.type&&lib.score.stop(),this.dispatchEvent({type:"complete"})},e.prototype.setCurrent=function(){return lib.scene=this.stack[this.currentScene],lib.scene.visible=!0},window.SceneStack=e,e}(l),D=function(){function e(){}return e.prototype.makeChild=function(e){switch(e.type){case"abc":return new t(e);case"drg":return new d(e);case"grd":return new y(e);case"txt":return new Q(e);case"img":return new b(e);case"lbl":return new C(e);case"cln":return new h(e);case"wrt":return new J(e);case"spr":return new X(e);case"btn":return new s(e);case"stps":return new Y(e);case"chs":return new a(e);case"idc":return new x(e);case"cwd":return new p(e);case"sac":return new H(e);case"wsch":return new K(e);case"ldrg":return new k(e);case"caw":return new r(e);case"pcct":return new j(e);case"wcpt":return new q(e);case"swct":return new R(e);case"ccpt":return new o(e);case"pcpt":return new O(e);case"iwcpt":return new v(e);case"crd":return new n(e);case"grp":return new u(e)}},window.SceneFactory=e,e}(),W=function(t){function e(){return le=e.__super__.constructor.apply(this,arguments)}return ge(e,t),e.NEXT_STEP="next_step",e.COMPLETE="scene_complete",window.SceneObserver=e,e}(E),P=function(t){function e(t){this.setStep=ce(this.setStep,this),this.next=ce(this.next,this),this.sndsuccess=ce(this.sndsuccess,this),this.initialize(t)}return ge(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,n,r,a,o,h,l,u,c,p,d;switch(this.Container_initialize(),A.extend(this,d2oda.methods),this.factory=new D,this.observer=new W,this.currentStep=0,this.choose=null!=(u=t.answers.choose)?u:0,e=t.answers.collection.slice(0),this.answers=t.answers.mixed===!0?d2oda.utilities.shuffle(e):e,this.chooseEnabled=t.answers.chooseEnabled,t.answers.type){case"steps":this.observer.subscribe(W.NEXT_STEP,this.next);break;case"limit":this.answers=d2oda.utilities.shuffleNoRepeat(this.answers,t.answers.limit),this.observer.subscribe(W.NEXT_STEP,this.next)}if(t.containers.length>0)for(c=t.containers,a=0,h=c.length;h>a;a++)s=c[a],i=this.factory.makeChild(s),this.add(i);if(t.groups.length>0){for(p=t.groups,d=[],o=0,l=p.length;l>o;o++)r=p[o],n=this.factory.makeChild(r),d.push(lib[r.id]=n);return d}},e.prototype.init=function(){return"clock"===lib.score.type&&(lib.score.start(),lib.score.addEventListener("count_complete",lib.game.nextScene)),this.setStep()},e.prototype.success=function(t,e){var i,s,n,r;if(null==t&&(t=!0),null==e&&(e=!0),e&&createjs.Sound.stop(),t&&lib.score.plusOne(),i=this.answers[this.currentStep],i&&i.length>0)for(n=0,r=i.length;r>n;n++)if(s=i[n],"snd"!==s.name&&"global"!==s.name&&"window"!==s.name&&lib[s.name].isComplete()===!1)return!1;return this.nextStep()},e.prototype.sndsuccess=function(){return this.success(!1)},e.prototype.fail=function(t){return null==t&&(t=!0),t&&lib.score.enableBlock(),lib.mainContainer.warning()},e.prototype.next=function(){return console.log("next"),this.currentStep++,this.currentStep>=this.answers.length?this.delay(1e3,function(){return lib.game.observer.notify(m.NEXT_SCENE)}):this.delay(1e3,this.setStep)},e.prototype.setStep=function(){var t,e,i,s,n,r;if(lib.instructions.playing)return lib.instructions.addEventListener("complete",this.setStep);if(console.log("setStep"),e=this.answers[this.currentStep],e&&e.length>0){for(r=[],s=0,n=e.length;n>s;s++)switch(i=e[s],i.name){case"global":d2oda.evaluator.success=i.opts.success,r.push(!1);break;case"snd":this.snd=i.opts.id,createjs.Sound.stop(),t=createjs.Sound.play(i.opts.id),i.opts.successoncomplete&&t.addEventListener("complete",this.sndsuccess),r.push(!1);break;case"window":this.window=window,i.opts.keydown?(this.window.target=i.opts.target,r.push(this.window.onkeydown=i.opts.keydown)):r.push(void 0);break;default:r.push(lib[i.name].update(i.opts))}return r}},e.prototype.nextStep=function(){return console.log("next step"),this.observer.notify(W.NEXT_STEP)},window.Scene=e,e}(l)}).call(this);